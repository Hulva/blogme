<% layout('blogmePlate') -%>
<div class="row main">
    <script type="text/javascript" charset="utf-8" src="/ueditor/ueditor.config.js"></script>
    <script type="text/javascript" charset="utf-8" src="/ueditor/ueditor.all.min.js">
    </script>
    <script type="text/javascript" charset="utf-8" src="/ueditor/lang/zh-cn/zh-cn.js">
    </script>
    <div class="col-md-10 col-md-offset-1">
        <form method="post" id="sendPost">
            <div class="form-group">
                <label>标题：</label>
                <input type="text" name="title" value="<%= post.title %>" disabled="disabled" />
            </div>
            <div class="form-group">
                <label>标签：</label>
                <input type="text" name="tag1" value="<%= post.tags[0] %>" disabled="disabled" />
                <input type="text" name="tag2" value="<%= post.tags[1] %>" disabled="disabled" />
                <input type="text" name="tag3" value="<%= post.tags[2] %>" disabled="disabled" />
            </div>
            <script id="editor" type="text/plain" style="height:400px;"></script>

            <input type="hidden" name="content" value="" id="postContent" />
            <button class="btn btn-default" type="button" onclick="sendPost()">更新</button>
        </form>

    </div>
    <script type="text/javascript">
        var ue = UE.getEditor('editor');
        ue.ready(function () {
            UE.getEditor('editor').setContent('<%- post.content %>', true);
        });

        function sendPost() {
            document.getElementById("postContent").value = UE.getEditor('editor').getContent();
            console.log(ue);
            console.log(ue.getPlainTxt().substr(0,10));
            console.log(ue.getContent());
            document.getElementById("sendPost").submit();
        }
    </script>
</div>
